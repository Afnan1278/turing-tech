{"ast":null,"code":"var _jsxFileName = \"D:\\\\Workspace\\\\react\\\\test\\\\src\\\\components\\\\AppSwitcher.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Button } from '@mui/material';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport DropdownMenu from \"../core/DropdownMenu\";\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { switchApp } from '../store/actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AppSwitcher = props => {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const appList = useSelector(state => state.user ? state.user.settings.apps : null);\n  const currentApp = useSelector(state => state.currentApp.name);\n  const appMenus = useSelector(state => state.user ? state.user.settings.menu : null);\n  const [MenuList, setMenuList] = useState();\n  const [menuEl, setMenuEl] = React.useState(null);\n  const menuOpen = Boolean(menuEl);\n\n  const menuClick = event => {\n    setMenuEl(event.currentTarget);\n  };\n\n  const menuClose = () => {\n    setMenuEl(null);\n  };\n\n  const onItemClick = item => {\n    let cApp = MenuList === null || MenuList === void 0 ? void 0 : MenuList.filter(itm => {\n      return itm.id == item.id;\n    });\n\n    if (cApp) {\n      dispatch(switchApp({\n        id: cApp[0].id,\n        name: cApp[0].title\n      })); // redirect to first available link\n\n      let currentAppMenu = appMenus.filter(menu => {\n        return menu.app_id == cApp[0].id;\n      });\n\n      if (currentAppMenu.length > 0) {\n        history.push(currentAppMenu[0].path);\n      } else {\n        history.push('/');\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (appList) {\n      let menuList = [];\n      appList.forEach((ap, index) => {\n        menuList.push({\n          id: ap.id,\n          title: ap.name,\n          icon: ap.icon,\n          sep: index < appList.length - 1 ? true : false\n        });\n      });\n      setMenuList(menuList);\n    }\n  }, [appList]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      id: \"demo-customized-button\",\n      \"aria-controls\": \"demo-customized-menu\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": menuOpen ? 'true' : undefined,\n      variant: \"contained\",\n      disableElevation: true,\n      onClick: menuClick,\n      endIcon: /*#__PURE__*/_jsxDEV(KeyboardArrowDownIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 24\n      }, this),\n      size: \"small\",\n      style: {\n        fontSize: \"12px\"\n      },\n      children: \"Applications\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), MenuList && MenuList.length ? /*#__PURE__*/_jsxDEV(DropdownMenu, {\n      menuEl: menuEl,\n      menuOpen: menuOpen,\n      onClose: menuClose,\n      onClick: menuClose,\n      menuList: MenuList,\n      onItemClick: onItemClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this) : '']\n  }, void 0, true);\n};\n\n_s(AppSwitcher, \"6QhFywM/ISSpNkATIkMAuaZjyXc=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector];\n});\n\n_c = AppSwitcher;\nexport default AppSwitcher;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppSwitcher\");","map":{"version":3,"names":["React","useState","useEffect","Button","KeyboardArrowDownIcon","DropdownMenu","useHistory","useDispatch","useSelector","switchApp","AppSwitcher","props","dispatch","history","appList","state","user","settings","apps","currentApp","name","appMenus","menu","MenuList","setMenuList","menuEl","setMenuEl","menuOpen","Boolean","menuClick","event","currentTarget","menuClose","onItemClick","item","cApp","filter","itm","id","title","currentAppMenu","app_id","length","push","path","menuList","forEach","ap","index","icon","sep","undefined","fontSize"],"sources":["D:/Workspace/react/test/src/components/AppSwitcher.tsx"],"sourcesContent":["import React,{useState,useEffect} from \"react\";\r\nimport {Button} from '@mui/material';\r\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\r\nimport DropdownMenu,{TypeItem} from \"../core/DropdownMenu\";\r\nimport {useHistory} from 'react-router-dom';\r\nimport { useDispatch,useSelector } from \"react-redux\";\r\nimport {switchApp} from '../store/actions';\r\n\r\nconst AppSwitcher:React.FC = (props:any)=>{\r\n    \r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    const appList = useSelector((state:any)=>state.user?state.user.settings.apps:null);\r\n    const currentApp = useSelector((state:any)=>state.currentApp.name);\r\n    const appMenus = useSelector((state:any)=>state.user?state.user.settings.menu:null);\r\n\r\n    const [MenuList,setMenuList] = useState<TypeItem[]|[]>();\r\n    \r\n    const [menuEl, setMenuEl] = React.useState<null | HTMLElement>(null);\r\n    const menuOpen = Boolean(menuEl);\r\n    const menuClick = (event: React.MouseEvent<HTMLElement>) => {\r\n        setMenuEl(event.currentTarget);\r\n    };\r\n    const menuClose = () => {\r\n        setMenuEl(null);\r\n    };\r\n\r\n    const onItemClick = (item:any)=>{\r\n        let cApp:any = MenuList?.filter((itm)=>{\r\n            return itm.id == item.id;\r\n        });\r\n        if(cApp){\r\n            \r\n            dispatch(switchApp({id:cApp[0].id,name:cApp[0].title}));\r\n\r\n            // redirect to first available link\r\n            let currentAppMenu = appMenus.filter((menu:any)=>{\r\n                return menu.app_id == cApp[0].id;\r\n            });\r\n            if(currentAppMenu.length > 0){\r\n                history.push(currentAppMenu[0].path);\r\n            }else{\r\n                history.push('/');\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(appList){\r\n            let menuList:TypeItem[] = [];\r\n            appList.forEach((ap,index)=>{\r\n                menuList.push({\r\n                    id:ap.id,\r\n                    title:ap.name,\r\n                    icon:ap.icon,\r\n                    sep: (index<appList.length-1)?true:false\r\n                })\r\n            });\r\n            setMenuList(menuList);\r\n        }\r\n    },[appList])\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n              id=\"demo-customized-button\"\r\n              aria-controls=\"demo-customized-menu\"\r\n              aria-haspopup=\"true\"\r\n              aria-expanded={menuOpen ? 'true' : undefined}\r\n              variant=\"contained\"\r\n              disableElevation\r\n              onClick={menuClick}\r\n              endIcon={<KeyboardArrowDownIcon />}\r\n              size=\"small\"\r\n              style={{fontSize:\"12px\"}}\r\n            >\r\n              Applications \r\n            </Button>\r\n            {MenuList && MenuList.length?\r\n            <DropdownMenu \r\n                menuEl={menuEl} \r\n                menuOpen={menuOpen} \r\n                onClose={menuClose} \r\n                onClick={menuClose} \r\n                menuList={MenuList}\r\n                onItemClick={onItemClick}/>\r\n            :''}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default AppSwitcher;"],"mappings":"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"},"metadata":{},"sourceType":"module"}