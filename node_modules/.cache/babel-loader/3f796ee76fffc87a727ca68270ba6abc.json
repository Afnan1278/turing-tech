{"ast":null,"code":"const axios = require(\"axios\");\n\naxios.defaults.withCredentials = true;\nconst API_ENDPOINT = 'http://localhost:3000/api';\nconst client = {\n  get: async (url, params) => {\n    try {\n      let token = client.getAuth();\n      let response = await axios.get(`${API_ENDPOINT}${url}`, {\n        params: params,\n        headers: {\n          \"x-token\": `Bearer ${token}`\n        }\n      });\n      return {\n        error: false,\n        ...response.data\n      };\n    } catch (error) {\n      window.snakAlert.error(error.toString());\n      return {\n        error: true,\n        message: error.toString()\n      };\n    }\n  },\n  getAll: async url => {\n    try {\n      //console.log(`${API_ENDPOINT}${url}`)\n      let token = client.getAuth();\n      let response = await axios.get(`${API_ENDPOINT}${url}`, {\n        headers: {\n          \"x-token\": `Bearer ${token}`\n        }\n      });\n      return {\n        error: false,\n        ...response.data\n      };\n    } catch (error) {\n      window.snakAlert.error(error.toString());\n      return {\n        error: true,\n        message: error.toString()\n      };\n    }\n  },\n  post: async (url, params) => {\n    try {\n      let token = client.getAuth();\n      let response = await axios.post(`${API_ENDPOINT}${url}`, params, {\n        headers: {\n          \"x-token\": `Bearer ${token}`\n        }\n      });\n      return {\n        error: false,\n        ...response.data\n      };\n    } catch (error) {\n      window.snakAlert.error(error.toString());\n      return {\n        error: true,\n        message: error.toString()\n      };\n    }\n  },\n  put: async (url, params) => {\n    try {\n      let token = client.getAuth();\n      let response = await axios.put(`${API_ENDPOINT}${url}`, params, {\n        headers: {\n          \"x-token\": `Bearer ${token}`\n        }\n      });\n      return {\n        error: false,\n        ...response.data\n      };\n    } catch (error) {\n      return {\n        error: true,\n        message: error.toString()\n      };\n    }\n  },\n  delete: async (url, params) => {\n    try {\n      let token = client.getAuth();\n      let response = await axios.delete(`${API_ENDPOINT}${url}`, {\n        data: params,\n        headers: {\n          \"x-token\": `Bearer ${token}`\n        }\n      });\n      return {\n        error: false,\n        ...response.data\n      };\n    } catch (error) {\n      return {\n        error: true,\n        message: error.toString()\n      };\n    }\n  },\n  upload: async (type, blob) => {\n    const form = new FormData();\n    form.append(\"file\", blob);\n    form.append(\"type\", type); // banners|products|etc\n\n    try {\n      let token = client.getAuth();\n      let response = await axios.put(`${API_ENDPOINT}/upload`, form, {\n        headers: {\n          \"x-token\": `Bearer ${token}`,\n          \"content-type\": \"multipart/form-data; \"\n        }\n      });\n      return {\n        error: false,\n        ...response.data\n      };\n    } catch (error) {\n      return {\n        error: true,\n        message: error.toString()\n      };\n    }\n  },\n  getAuth: () => {\n    let auth = window.localStorage.getItem(\"auth\");\n\n    if (auth) {\n      auth = JSON.parse(auth);\n      return auth.token;\n    }\n  }\n};\nexport default client;","map":{"version":3,"names":["axios","require","defaults","withCredentials","API_ENDPOINT","client","get","url","params","token","getAuth","response","headers","error","data","window","snakAlert","toString","message","getAll","post","put","delete","upload","type","blob","form","FormData","append","auth","localStorage","getItem","JSON","parse"],"sources":["D:/Workspace/react/test/src/services/client.ts"],"sourcesContent":["const axios = require(\"axios\");\r\naxios.defaults.withCredentials = true;\r\nconst API_ENDPOINT = 'http://localhost:3000/api';\r\n\r\nconst client = {\r\n  get: async (url: string, params: any) => {\r\n    try {\r\n      let token = client.getAuth();\r\n      let response = await axios.get(`${API_ENDPOINT}${url}`, {\r\n        params: params,\r\n        headers: { \"x-token\": `Bearer ${token}` },\r\n      });\r\n      return {\r\n        error: false,\r\n        ...response.data,\r\n      };\r\n    } catch (error: any) {\r\n      window.snakAlert.error(error.toString());\r\n      return {\r\n        error: true,\r\n        message: error.toString(),\r\n      };\r\n    }\r\n  },\r\n  getAll: async (url: string) => {\r\n    try {\r\n      //console.log(`${API_ENDPOINT}${url}`)\r\n      let token = client.getAuth();\r\n      let response = await axios.get(`${API_ENDPOINT}${url}`, {\r\n        headers: { \"x-token\": `Bearer ${token}` },\r\n      });\r\n      return {\r\n        error: false,\r\n        ...response.data,\r\n      };\r\n    } catch (error: any) {\r\n      window.snakAlert.error(error.toString());\r\n      return {\r\n        error: true,\r\n        message: error.toString(),\r\n      };\r\n    }\r\n  },\r\n  post: async (url: string, params: any) => {\r\n    try {\r\n      let token = client.getAuth();\r\n      let response = await axios.post(`${API_ENDPOINT}${url}`, params, {\r\n        headers: { \"x-token\": `Bearer ${token}` },\r\n      });\r\n      return {\r\n        error: false,\r\n        ...response.data,\r\n      };\r\n    } catch (error: any) {\r\n      window.snakAlert.error(error.toString());\r\n      return {\r\n        error: true,\r\n        message: error.toString(),\r\n      };\r\n    }\r\n  },\r\n  put: async (url: string, params: any) => {\r\n    try {\r\n      let token = client.getAuth();\r\n      let response = await axios.put(`${API_ENDPOINT}${url}`, params, {\r\n        headers: { \"x-token\": `Bearer ${token}` },\r\n      });\r\n      return {\r\n        error: false,\r\n        ...response.data,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        error: true,\r\n        message: error.toString(),\r\n      };\r\n    }\r\n  },\r\n  delete: async (url: string, params: any) => {\r\n    try {\r\n      let token = client.getAuth();\r\n      let response = await axios.delete(`${API_ENDPOINT}${url}`, {\r\n        data: params,\r\n        headers: { \"x-token\": `Bearer ${token}` },\r\n      });\r\n      return {\r\n        error: false,\r\n        ...response.data,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        error: true,\r\n        message: error.toString(),\r\n      };\r\n    }\r\n  },\r\n  upload: async (type: string, blob: any) => {\r\n    const form: any = new FormData();\r\n    form.append(\"file\", blob);\r\n    form.append(\"type\", type); // banners|products|etc\r\n    try {\r\n      let token = client.getAuth();\r\n      let response = await axios.put(`${API_ENDPOINT}/upload`, form, {\r\n        headers: {\r\n          \"x-token\": `Bearer ${token}`,\r\n          \"content-type\": \"multipart/form-data; \",\r\n        },\r\n      });\r\n      return {\r\n        error: false,\r\n        ...response.data,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        error: true,\r\n        message: error.toString(),\r\n      };\r\n    }\r\n  },\r\n  getAuth: () => {\r\n    let auth: any = window.localStorage.getItem(\"auth\");\r\n    if (auth) {\r\n      auth = JSON.parse(auth);\r\n      return auth.token;\r\n    }\r\n  },\r\n};\r\n\r\nexport default client;\r\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACAD,KAAK,CAACE,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AACA,MAAMC,YAAY,GAAG,2BAArB;AAEA,MAAMC,MAAM,GAAG;EACbC,GAAG,EAAE,OAAOC,GAAP,EAAoBC,MAApB,KAAoC;IACvC,IAAI;MACF,IAAIC,KAAK,GAAGJ,MAAM,CAACK,OAAP,EAAZ;MACA,IAAIC,QAAQ,GAAG,MAAMX,KAAK,CAACM,GAAN,CAAW,GAAEF,YAAa,GAAEG,GAAI,EAAhC,EAAmC;QACtDC,MAAM,EAAEA,MAD8C;QAEtDI,OAAO,EAAE;UAAE,WAAY,UAASH,KAAM;QAA7B;MAF6C,CAAnC,CAArB;MAIA,OAAO;QACLI,KAAK,EAAE,KADF;QAEL,GAAGF,QAAQ,CAACG;MAFP,CAAP;IAID,CAVD,CAUE,OAAOD,KAAP,EAAmB;MACnBE,MAAM,CAACC,SAAP,CAAiBH,KAAjB,CAAuBA,KAAK,CAACI,QAAN,EAAvB;MACA,OAAO;QACLJ,KAAK,EAAE,IADF;QAELK,OAAO,EAAEL,KAAK,CAACI,QAAN;MAFJ,CAAP;IAID;EACF,CAnBY;EAoBbE,MAAM,EAAE,MAAOZ,GAAP,IAAuB;IAC7B,IAAI;MACF;MACA,IAAIE,KAAK,GAAGJ,MAAM,CAACK,OAAP,EAAZ;MACA,IAAIC,QAAQ,GAAG,MAAMX,KAAK,CAACM,GAAN,CAAW,GAAEF,YAAa,GAAEG,GAAI,EAAhC,EAAmC;QACtDK,OAAO,EAAE;UAAE,WAAY,UAASH,KAAM;QAA7B;MAD6C,CAAnC,CAArB;MAGA,OAAO;QACLI,KAAK,EAAE,KADF;QAEL,GAAGF,QAAQ,CAACG;MAFP,CAAP;IAID,CAVD,CAUE,OAAOD,KAAP,EAAmB;MACnBE,MAAM,CAACC,SAAP,CAAiBH,KAAjB,CAAuBA,KAAK,CAACI,QAAN,EAAvB;MACA,OAAO;QACLJ,KAAK,EAAE,IADF;QAELK,OAAO,EAAEL,KAAK,CAACI,QAAN;MAFJ,CAAP;IAID;EACF,CAtCY;EAuCbG,IAAI,EAAE,OAAOb,GAAP,EAAoBC,MAApB,KAAoC;IACxC,IAAI;MACF,IAAIC,KAAK,GAAGJ,MAAM,CAACK,OAAP,EAAZ;MACA,IAAIC,QAAQ,GAAG,MAAMX,KAAK,CAACoB,IAAN,CAAY,GAAEhB,YAAa,GAAEG,GAAI,EAAjC,EAAoCC,MAApC,EAA4C;QAC/DI,OAAO,EAAE;UAAE,WAAY,UAASH,KAAM;QAA7B;MADsD,CAA5C,CAArB;MAGA,OAAO;QACLI,KAAK,EAAE,KADF;QAEL,GAAGF,QAAQ,CAACG;MAFP,CAAP;IAID,CATD,CASE,OAAOD,KAAP,EAAmB;MACnBE,MAAM,CAACC,SAAP,CAAiBH,KAAjB,CAAuBA,KAAK,CAACI,QAAN,EAAvB;MACA,OAAO;QACLJ,KAAK,EAAE,IADF;QAELK,OAAO,EAAEL,KAAK,CAACI,QAAN;MAFJ,CAAP;IAID;EACF,CAxDY;EAyDbI,GAAG,EAAE,OAAOd,GAAP,EAAoBC,MAApB,KAAoC;IACvC,IAAI;MACF,IAAIC,KAAK,GAAGJ,MAAM,CAACK,OAAP,EAAZ;MACA,IAAIC,QAAQ,GAAG,MAAMX,KAAK,CAACqB,GAAN,CAAW,GAAEjB,YAAa,GAAEG,GAAI,EAAhC,EAAmCC,MAAnC,EAA2C;QAC9DI,OAAO,EAAE;UAAE,WAAY,UAASH,KAAM;QAA7B;MADqD,CAA3C,CAArB;MAGA,OAAO;QACLI,KAAK,EAAE,KADF;QAEL,GAAGF,QAAQ,CAACG;MAFP,CAAP;IAID,CATD,CASE,OAAOD,KAAP,EAAmB;MACnB,OAAO;QACLA,KAAK,EAAE,IADF;QAELK,OAAO,EAAEL,KAAK,CAACI,QAAN;MAFJ,CAAP;IAID;EACF,CAzEY;EA0EbK,MAAM,EAAE,OAAOf,GAAP,EAAoBC,MAApB,KAAoC;IAC1C,IAAI;MACF,IAAIC,KAAK,GAAGJ,MAAM,CAACK,OAAP,EAAZ;MACA,IAAIC,QAAQ,GAAG,MAAMX,KAAK,CAACsB,MAAN,CAAc,GAAElB,YAAa,GAAEG,GAAI,EAAnC,EAAsC;QACzDO,IAAI,EAAEN,MADmD;QAEzDI,OAAO,EAAE;UAAE,WAAY,UAASH,KAAM;QAA7B;MAFgD,CAAtC,CAArB;MAIA,OAAO;QACLI,KAAK,EAAE,KADF;QAEL,GAAGF,QAAQ,CAACG;MAFP,CAAP;IAID,CAVD,CAUE,OAAOD,KAAP,EAAmB;MACnB,OAAO;QACLA,KAAK,EAAE,IADF;QAELK,OAAO,EAAEL,KAAK,CAACI,QAAN;MAFJ,CAAP;IAID;EACF,CA3FY;EA4FbM,MAAM,EAAE,OAAOC,IAAP,EAAqBC,IAArB,KAAmC;IACzC,MAAMC,IAAS,GAAG,IAAIC,QAAJ,EAAlB;IACAD,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBH,IAApB;IACAC,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBJ,IAApB,EAHyC,CAGd;;IAC3B,IAAI;MACF,IAAIf,KAAK,GAAGJ,MAAM,CAACK,OAAP,EAAZ;MACA,IAAIC,QAAQ,GAAG,MAAMX,KAAK,CAACqB,GAAN,CAAW,GAAEjB,YAAa,SAA1B,EAAoCsB,IAApC,EAA0C;QAC7Dd,OAAO,EAAE;UACP,WAAY,UAASH,KAAM,EADpB;UAEP,gBAAgB;QAFT;MADoD,CAA1C,CAArB;MAMA,OAAO;QACLI,KAAK,EAAE,KADF;QAEL,GAAGF,QAAQ,CAACG;MAFP,CAAP;IAID,CAZD,CAYE,OAAOD,KAAP,EAAmB;MACnB,OAAO;QACLA,KAAK,EAAE,IADF;QAELK,OAAO,EAAEL,KAAK,CAACI,QAAN;MAFJ,CAAP;IAID;EACF,CAlHY;EAmHbP,OAAO,EAAE,MAAM;IACb,IAAImB,IAAS,GAAGd,MAAM,CAACe,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAhB;;IACA,IAAIF,IAAJ,EAAU;MACRA,IAAI,GAAGG,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP;MACA,OAAOA,IAAI,CAACpB,KAAZ;IACD;EACF;AAzHY,CAAf;AA4HA,eAAeJ,MAAf"},"metadata":{},"sourceType":"module"}